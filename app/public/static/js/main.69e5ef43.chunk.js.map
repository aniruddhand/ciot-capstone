{"version":3,"sources":["components/authprovider.jsx","components/navbar.jsx","components/explorer.jsx","app.jsx","routes/login.jsx","components/checksession.jsx","routes/dashboard/summary.jsx","routes/dashboard/usage.jsx","routes/schedules/current.jsx","routes/status/fleet.jsx","routes/alerts/active.jsx","routes/alerts/history.jsx","routes/dashboard/monitor.jsx","index.jsx"],"names":["AuthContext","createContext","useAuth","useContext","AuthProvider","children","useState","user","setUser","Provider","value","signIn","email","pin","cb","body","JSON","stringify","request","Request","method","headers","fetch","then","response","status","json","ok","error","console","log","catch","text","signOut","Navbar","auth","navigate","useNavigate","className","to","id","fullName","onClick","replace","ContentExplorer","location","useLocation","getClassName","path","pathname","endsWith","useEffect","style","width","borderTop","marginTop","App","height","queried","LoginPage","sessionChecked","setSessionChecked","authenticating","setAuthenticating","lastLoc","state","from","onSubmit","event","preventDefault","formData","FormData","currentTarget","get","name","type","placeholder","required","htmlFor","disabled","role","href","CheckSession","SummaryPage","undefined","setStatus","cachedStatus","sessionStorage","getItem","parse","setItem","data","removeItem","fontSize","color","wlgw","volume","ago","Date","timestamp","slgw","pump","UsagePage","fleetTimeseries","setFleetTimeseries","cachedTimeseries","fleetStatus","now","date","fromTimestamp","getHours","getMinutes","getSeconds","toTimestamp","wlGWThingName","thingName","slGWThingName","actualSeries","timeseries","length","lastVolume","forEach","epoch","datetime","push","LineChart","Line","dataKey","stroke","CartesianGrid","strokeDasharray","XAxis","YAxis","Tooltip","CurrentSchedule","startsOn","minLevel","endsOn","maxLevel","lastUpdatedOn","pumpSchedule","FleetHub","getAlertCard","alert","Math","round","mean","timeRange","toDateString","getAlertMessage","title","message","enrichWithHumanReadableDate","fromDate","toDate","fromHours","fromMinutes","fromAm","toHours","toMinutes","toAm","ActiveNotifications","fetching","alerts","setAlerts","fetched","setFetched","wlgwThingName","encodeURI","slgwThingName","map","index","NotificationsHistory","getAlertLevel","diffInMill","late","tooLate","getHumanReadableDateTime","toLocaleString","MonitorPage","ReactDOM","render","StrictMode","element","document","getElementById"],"mappings":"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","file":"static/js/main.69e5ef43.chunk.js","sourcesContent":["import { createContext, useContext, useState } from 'react';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n    return useContext(AuthContext);\r\n}\r\n\r\nexport default function AuthProvider({children}) {\r\n    let [user, setUser] = useState();\r\n\r\n    let signIn = (email, pin, cb) => {\r\n        const body = JSON.stringify({\r\n            email: email,\r\n            pin: pin\r\n        });\r\n\r\n        const request = new Request('api/login', {\r\n            method: 'POST',\r\n            body: body,\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        \r\n        fetch(request).then(response => {\r\n            if (response.status >= 200 && response.status < 500) {\r\n                response.json().then(body => {\r\n                    setUser(response.ok ? body : null);\r\n                    cb(response.ok ? null : body);\r\n                }, error => {\r\n                    console.log(error);\r\n                }).catch(error => {\r\n                    console.log(error);\r\n                });\r\n            } else {\r\n                response.text().then(body => {\r\n                    setUser(null);\r\n                    cb();\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    let signOut = (email, cb) => {\r\n        const request = new Request('/api/logout', {method: 'POST', body: JSON.stringify({'email': email})});\r\n\r\n        fetch(request).then(response => {\r\n            setUser(null);\r\n            cb();\r\n        });\r\n    }\r\n\r\n    return <AuthContext.Provider value={{user, signIn, signOut}}>{children}</AuthContext.Provider>;\r\n}","import { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from './authprovider';\r\n\r\nexport default function Navbar() {\r\n    const auth = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    function logout() {\r\n        auth.signOut(auth.user?.email, () => {\r\n            navigate('/login', {replace: true});\r\n        });\r\n    }\r\n\r\n    return (\r\n        <nav className='navbar navbar-expand-lg navbar-light bg-light'>\r\n            <div className='container'>\r\n                <h1><Link className='navbar-brand' to='/dashboard/summary'>Smart Water Level Controller</Link></h1>\r\n                <div className='collapse navbar-collapse' id='navbarSupportedContent'>\r\n                    <ul className='d-flex navbar-nav me-auto mb-2 mb-lg-0'></ul>\r\n                    <div className='nav-item dropdown d-flex'>\r\n                        <div className='nav-item dropdown'>\r\n                            <button className='btn btn-secondary btn-sm dropdown-toggle' id='navbarDropdown' data-bs-toggle='dropdown' aria-expanded='false'>\r\n                                {auth.user?.fullName}\r\n                            </button>\r\n                            <ul className='dropdown-menu' aria-labelledby='navbarDropdown'>\r\n                                <li><button className='dropdown-item' onClick={logout}>Logout</button></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    )\r\n}","import { useEffect } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\n\r\nconst grpCls = 'list-group-item';\r\nconst actGrpCls = 'list-group-item active';\r\n\r\nexport default function ContentExplorer() {\r\n\tconst location = useLocation();\r\n\tconst navigate = useNavigate();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (location.pathname === '/') {\r\n\t\t\tnavigate('/dashboard/summary', {replace: true});\r\n\t\t}\r\n\t}, [location, navigate]);\r\n\r\n\tfunction getClassName(path) {\r\n\t\treturn location.pathname.endsWith(path) ? actGrpCls : grpCls;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='card shadow' style={{ width: '18rem' }}>\r\n\t\t\t<div className='card-header'>\r\n\t\t\t\t<h5 className='card-title'>Dashboard</h5>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-body'>\r\n\t\t\t\t<ul className='list-group list-group-flush'>\r\n\t\t\t\t\t<Link to='/dashboard/summary' className={getClassName('/dashboard/summary')}>Summary</Link>\r\n\t\t\t\t\t<Link to='/dashboard/usage'className={getClassName('/dashboard/usage')}>Usage</Link>\r\n\t\t\t\t\t<Link to='/dashboard/monitor'className={getClassName('/dashboard/monitor')}>Monitor</Link>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-header' style={{borderTop: '1px solid rgba(0,0,0,.125)'}}>\r\n\t\t\t\t<h5 className='card-title' style={{ marginTop: '10px' }}>Schedules</h5>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-body'>\r\n\t\t\t\t<ul className='list-group list-group-flush'>\r\n\t\t\t\t\t<Link to='/schedules/current' className={getClassName('/schedules/current')}>Water Pump</Link>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-header' style={{borderTop: '1px solid rgba(0,0,0,.125)'}}>\r\n\t\t\t\t<h5 className='card-title' style={{ marginTop: '10px' }}>Alerts</h5>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-body'>\r\n\t\t\t\t<ul className='list-group list-group-flush'>\r\n\t\t\t\t\t<Link to='/alerts/active' className={getClassName('/alerts/active')}>Active</Link>\r\n\t\t\t\t\t<Link to='/alerts/history' className={getClassName('/alerts/history')}>History</Link>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}","import { Outlet } from 'react-router-dom';\nimport Navbar from './components/navbar';\nimport ContentExplorer from './components/explorer';\n\nfunction App() {\n  return (\n    <div style={{ height: '100%' }}>\n      <Navbar/>\n      <div className='container'>\n        <div className='row' style={{ marginTop: '10px' }}>\n          <div className='col-3'><ContentExplorer/></div>\n          <div className='col'>\n            <Outlet />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;","import { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router';\r\nimport { useAuth } from '../components/authprovider';\r\n\r\nlet queried = false;\r\n\r\nfunction LoginPage() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation()\r\n  const auth = useAuth();\r\n\r\n  const [sessionChecked, setSessionChecked] = useState(false);\r\n  const [authenticating, setAuthenticating] = useState(false);\r\n\r\n  let lastLoc = location.state?.from?.pathname || '/';\r\n\r\n  function doLogin(event) {\r\n    event.preventDefault();\r\n    \r\n    setAuthenticating(true);\r\n    let formData = new FormData(event.currentTarget);\r\n    \r\n    let email = formData.get('email');\r\n    let pin = formData.get('pin');\r\n\r\n    auth.signIn(email, pin, (error) => {\r\n      if (!error) {\r\n        navigate(lastLoc, {replace: true});\r\n      } else {\r\n        setAuthenticating(false);\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!auth.user && !sessionChecked) {\r\n      if (!queried) {\r\n        queried = true;\r\n        fetch('/api/session').then(response => {\r\n            if (response.status === 200) {\r\n                response.json().then(body => {\r\n                    auth.user = body;\r\n                    navigate('/', {replace: true});\r\n                });\r\n            } else {\r\n                setSessionChecked(true);\r\n            }\r\n        });\r\n      } else {\r\n        setSessionChecked(true);\r\n      }\r\n    } else {\r\n      setSessionChecked(true);\r\n    }\r\n\r\n    return () => {\r\n        setSessionChecked(true);\r\n    }\r\n  }, [sessionChecked, auth, navigate]);\r\n\r\n  if (sessionChecked && !auth.user) {\r\n    return(\r\n      <div className='container vh-100'>\r\n        <div className='row align-items-center vh-100'>\r\n            <div className='col'></div>\r\n            <div className='col'>\r\n              <form onSubmit={doLogin}>\r\n                <h3>Sign in</h3>\r\n                <div className='form-floating mb-3'>\r\n                  <input name='email' type='email' className='form-control' id='floatingInput' placeholder='name@example.com' required></input>\r\n                  <label htmlFor='floatingInput'>Email address</label>\r\n                </div>\r\n                <div className='form-floating'>\r\n                  <input name='pin' type='password' className='form-control' id='floatingPassword' placeholder='Pin' required></input>\r\n                  <label htmlFor='floatingPassword'>Pin</label>\r\n                </div>\r\n                <button type='submit' className='btn btn-primary' style={{marginTop: '10px'}} disabled={authenticating}>\r\n                  {authenticating && <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>}\r\n                  {authenticating && ' Sign in'}\r\n                  {!authenticating && 'Sign in'}\r\n                </button>\r\n                <div className='form-text'>Not registered? <a href='/register' className='link-primary'>Register here</a></div>\r\n              </form>\r\n            </div>\r\n            <div className='col'></div>\r\n          </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return <div></div>\r\n  }\r\n}\r\n\r\nexport default LoginPage;","import { useEffect, useState } from 'react';\r\nimport { Navigate, useLocation } from 'react-router';\r\nimport { useAuth } from './authprovider';\r\n\r\nexport default function CheckSession({children}) {\r\n    const [sessionChecked, setSessionChecked] = useState(false);\r\n\r\n    const auth = useAuth();\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        if (!auth.user && !sessionChecked) {\r\n            fetch('/api/session').then(response => {\r\n                if (response.status === 200) {\r\n                    response.json().then(body => {\r\n                        auth.user = body;\r\n                        setSessionChecked(true);\r\n                    });\r\n                } else {\r\n                    setSessionChecked(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            setSessionChecked(true);\r\n        }\r\n    }, [sessionChecked, auth]);\r\n\r\n    if (!auth.user) {\r\n        if (sessionChecked) {\r\n            return (<Navigate to='/login' state={{from: location}}></Navigate>);\r\n        } else {\r\n            return <div></div>\r\n        }\r\n    }\r\n\r\n    return children;\r\n}","import { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router';\r\nimport { useAuth } from '../../components/authprovider';\r\nimport ago from 's-ago';\r\n\r\nexport default function SummaryPage() {\r\n    const auth = useAuth();\r\n    const [status, setStatus] = useState(undefined);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (status) {\r\n            return;\r\n        }\r\n\r\n        const cachedStatus = sessionStorage.getItem('fleetStatus');\r\n        if (cachedStatus) {\r\n            setStatus(JSON.parse(cachedStatus));\r\n            return;\r\n        }\r\n\r\n        fetch('/api/status').then(response => {\r\n            if (response.status >= 200 && response.status < 400) {\r\n                response.json().then(body => {\r\n                    setStatus(body);\r\n                    sessionStorage.setItem('fleetStatus', JSON.stringify(body));\r\n                });\r\n            } else {\r\n                response.text().then(data => {\r\n                    console.log(data);\r\n                })\r\n            }\r\n        });\r\n    }, [status, auth, navigate]);\r\n\r\n    function refreshStatus() {\r\n        sessionStorage.removeItem('fleetStatus');\r\n        setStatus(null);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h3>Summary</h3>\r\n            <p className='fw-normal'>This page a brief summary of various components of the water management system in your apartment.</p>\r\n            {!status && <p className='fw-normal'>Please wait while we fetch latest water levels in your aparment...</p>}\r\n            {!status &&\r\n                <div className='d-flex justify-content-center'>\r\n                    <div className='spinner-border m-5' role='status' style={{ width: '3rem', height: '3rem' }}></div>\r\n                </div>}\r\n            {status &&\r\n                <div className=\"row\">\r\n                    <div className=\"col-8\">\r\n                        <p className='d-flex justify-content-end'>\r\n                            <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={refreshStatus}>Refresh</button>\r\n                        </p>\r\n                        <div className='card mb-3 top-m-5'>\r\n                            <div className='row g-0 h-100'>\r\n                                <div className='col-md-4 bg-secondary'>\r\n                                    <div className='img-fluid rounded-start d-flex align-items-center justify-content-center'>\r\n                                        <i className='bi bi-water' style={{ fontSize: '07rem', color: 'cornflowerblue' }}></i>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='col-md-8'>\r\n                                    <div className='card-body'>\r\n                                        <h5 className='card-title'>Overhead Tank</h5>\r\n                                        <p className='card-text'>The overhead water tank has <span className='fw-bold'>{status.wlgw.volume}</span> liters of water.</p>\r\n                                        <p className='card-text'><small className='text-muted'>Last updated {ago(new Date(status.wlgw.timestamp))}</small></p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n            {status && status.slgw &&\r\n                <div className=\"row\">\r\n                    <div className=\"col-8\">\r\n                        <div className='card mb-3 top-m-5'>\r\n                            <div className='row g-0 h-100'>\r\n                                <div className='col-md-4 bg-secondary'>\r\n                                    <div className='img-fluid rounded-start d-flex align-items-center justify-content-center'>\r\n                                        <i className='bi bi-moisture' style={{ fontSize: '07rem', color: 'cornflowerblue' }}></i>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='col-md-8'>\r\n                                    <div className='card-body'>\r\n                                        <h5 className='card-title'>Sump Tank</h5>\r\n                                        <p className='card-text'>The sump tank has <span className='fw-bold'>{status.slgw.volume}</span> liters of water.</p>\r\n                                        <p className='card-text'><small className='text-muted'>Last updated {ago(new Date(status.slgw.timestamp))}</small></p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n            {status && status.pump && false &&\r\n                <div className=\"row\">\r\n                    <div className=\"col-8\">\r\n                        <div className='card mb-3 top-m-5'>\r\n                            <div className='row g-0 h-100'>\r\n                                <div className='col-md-4 bg-secondary'>\r\n                                    <div className='img-fluid rounded-start d-flex align-items-center justify-content-center'>\r\n                                        <i className='bi bi-moisture' style={{ fontSize: '07rem', color: 'cornflowerblue' }}></i>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='col-md-8'>\r\n                                    <div className='card-body'>\r\n                                        <h5 className='card-title'>Pump</h5>\r\n                                        <p className='card-text'>\r\n                                            Pump is currently <span className='fw-bold'>{status.pump.isOn ? 'OFF' : 'ON'}</span>.\r\n                                        </p>\r\n                                        <p className='card-text'><small className='text-muted'>Last updated {ago(new Date(status.pump.timestamp))}</small></p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}","import { useEffect, useState } from \"react\"\r\nimport { CartesianGrid, Line, LineChart, Tooltip, XAxis, YAxis } from \"recharts\";\r\n\r\nexport default function UsagePage() {\r\n  const [fleetTimeseries, setFleetTimeseries] = useState();\r\n\r\n  useEffect(() => {\r\n    if (fleetTimeseries) {\r\n      return;\r\n    }\r\n\r\n    const cachedTimeseries = sessionStorage.getItem('fleetUsage');\r\n    if (cachedTimeseries) {\r\n      setFleetTimeseries(JSON.parse(cachedTimeseries));\r\n      return;\r\n    }\r\n\r\n    const fleetStatus = JSON.parse(sessionStorage.getItem('fleetStatus'));\r\n\r\n    const now = Date.now();\r\n    const date = new Date(now);\r\n\r\n    const fromTimestamp = (now - date.getHours()*60*60*1000 - date.getMinutes()*60*1000 - date.getSeconds()*1000);\r\n    const toTimestamp = (fromTimestamp + 23*60*60*1000 + 59*60*1000 + 59*1000);\r\n\r\n    const body = {\r\n      wlGWThingName: fleetStatus.wlgw.thingName,\r\n      slGWThingName: fleetStatus.slgw.thingName,\r\n      fromTimestamp: fromTimestamp,\r\n      toTimestamp: toTimestamp\r\n    }\r\n\r\n    fetch('/api/timeseries/usage', {method: 'POST', body: JSON.stringify(body), headers: {'Content-Type': 'application/json'}})\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          const actualSeries = {wlgw: []};\r\n\r\n          response.json().then(timeseries => {\r\n            if (timeseries.wlgw && timeseries.wlgw.length) {\r\n              let lastVolume = 0;\r\n\r\n              timeseries.wlgw.forEach(data => {\r\n                if (data.volume === lastVolume) {\r\n                  return;\r\n                }\r\n\r\n                const epoch = new Date(data.timestamp);\r\n                data.datetime = epoch.getHours() + \":\" + epoch.getMinutes() + ' ' + (epoch.getHours() < 12 ? 'am' : 'pm')\r\n\r\n                actualSeries.wlgw.push(data);\r\n                lastVolume = data.volume;\r\n              })\r\n            }\r\n            setFleetTimeseries(actualSeries);\r\n            sessionStorage.setItem('fleetUsage', JSON.stringify(actualSeries));\r\n          });\r\n        }\r\n      });\r\n  }, [fleetTimeseries]);\r\n\r\n  function refreshStatus() {\r\n    sessionStorage.removeItem('fleetUsage');\r\n    setFleetTimeseries(null);\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h3>Today's Usage</h3>\r\n      <p className='fw-normal'>This page shows overhead tank's water levels in today's time period.</p>\r\n      <p className='d-flex justify-content-end'>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={refreshStatus}>Refresh</button>\r\n      </p>\r\n      {!fleetTimeseries &&\r\n        <div className='d-flex justify-content-center'>\r\n            <div className='spinner-border m-5' role='status' style={{ width: '3rem', height: '3rem' }}></div>\r\n        </div>}\r\n      {fleetTimeseries &&\r\n      <LineChart width={900} height={400} data={fleetTimeseries.wlgw}>\r\n        <Line type=\"monotone\" dataKey=\"volume\" stroke=\"#ff7300\" />\r\n        <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"5 5\"/>\r\n        <XAxis dataKey=\"datetime\"/>\r\n        <YAxis />\r\n        <Tooltip />\r\n      </LineChart>\r\n      }\r\n    </div>\r\n  )\r\n}","import { useState } from \"react\";\r\nimport ago from 's-ago';\r\n\r\n// function epochToDate(epochSinceMidnight) {\r\n//   let today = Date.now();\r\n//   let todayAt00InMillis = new Date(today.getFullYear(), today.getMonth()+1, today.getDay()+1).getMilliseconds();\r\n\r\n//   return new Date(todayAt00InMillis + epochSinceMidnight);\r\n// }\r\n\r\n// function getFormattedDate(date) {\r\n//   const day = date.getDay()+1;\r\n//   const month = date.getMonth()+1;\r\n//   const year = date.getFullYear();\r\n\r\n//   return  day + '/' + month + '/' + year;\r\n// }\r\n\r\nexport default function CurrentSchedule() {\r\n  const [pumpSchedule] = useState({\r\n    startsOn: {\r\n      minLevel: 600\r\n    },\r\n    endsOn: {\r\n      maxLevel: 1500\r\n    },\r\n    lastUpdatedOn: new Date(1636494845000)\r\n  });\r\n\r\n  return (\r\n  <div>\r\n    <h3>Water pump schedule</h3>\r\n    <p className='fw-normal'>This page shows the current schedule of your water pumping system.</p>\r\n    <div className=\"row\">\r\n      <div className=\"col-8\">\r\n        <div className='card mb-3 top-m-5'>\r\n          <div className='row g-0'>\r\n              <div className='col-md-4 bg-secondary'>\r\n                  <div className='img-fluid rounded-start d-flex align-items-center justify-content-center h-100'>\r\n                      <i className='bi bi-calendar2-date-fill' style={{fontSize: '07rem', color: 'cornflowerblue'}}></i>\r\n                  </div>\r\n              </div>\r\n              <div className='col-md-8'>\r\n                  <div className='card-body'>\r\n                      <h5 className='card-title'>Pump timings</h5>\r\n                      Current schedule of your water pump is as follows:\r\n                      <p></p>\r\n                      <h6>Turns on</h6>\r\n                      <p className='card-text'>Whenever water level drops below&nbsp;\r\n                        <span className='fw-bold'>{pumpSchedule.startsOn.minLevel}</span> liters.</p>\r\n                      <h6>Turns off</h6>\r\n                      <p className='card-text'>Whenever water level reaches&nbsp;\r\n                        <span className='fw-bold'>{pumpSchedule.endsOn.maxLevel}</span> liters.</p>\r\n                      <p className='card-text'>\r\n                        <small className='text-muted'>Updated {ago(pumpSchedule.lastUpdatedOn)}</small>\r\n                      </p>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className='row'>\r\n        <div className='d-flex col-8 justify-content-end gx-0'>\r\n          <div><button className=\"btn btn-primary bg-lt\">Change schedule</button></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  )\r\n}","export default function FleetHub() {\r\n  return (\r\n    <div>\r\n      <h3>Fleet Hub</h3>\r\n      <p className='fw-normal'>This page shows current status of your devices.</p>\r\n    </div>\r\n  )\r\n}","import { useEffect, useState } from \"react\"\r\n\r\nfunction getAlertMessage(alert) {\r\n  switch (alert.type) {\r\n    case 'Leakage':\r\n      return ['Water flowed continuously!',\r\n                  <span>Water was continuously flowing at a rate of <span className='fw-bold'>{Math.round(alert.data.mean)} ltr</span>\r\n                  &nbsp;per minute between <span className='fw-bold'>{alert.data.timeRange}</span> on \r\n                  &nbsp;{new Date(alert.timestamp).toDateString()}</span>]\r\n    default:\r\n      return ['Attention']\r\n  }\r\n}\r\n\r\nfunction getAlertCard(alert) {\r\n  const [title, message] = getAlertMessage(alert);\r\n  return (\r\n    <div className=\"col-8\">\r\n      <div className='card mb-3 top-m-5'>\r\n        <div className='row g-0 h-100'>\r\n          <div className='col-md-4 bg-warning'>\r\n            <div className='img-fluid rounded-start d-flex align-items-center justify-content-center'>\r\n              <i className='bi bi-droplet-half' style={{ fontSize: '07rem', color: 'red' }}></i>\r\n            </div>\r\n          </div>\r\n          <div className='col-md-8'>\r\n            <div className='card-body'>\r\n              <h5 className='card-title'>{title}</h5>\r\n              <p className='card-text'>{message}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction enrichWithHumanReadableDate(alert) {\r\n  const fromDate = new Date(alert.data.fromTimestamp);\r\n  const toDate = new Date(alert.data.toTimestamp);\r\n\r\n  const fromHours = fromDate.getHours();\r\n  const fromMinutes = fromDate.getMinutes() < 10 ? ('0' + fromDate.getMinutes()) : fromDate.getMinutes();\r\n  const fromAm = (fromHours > 12 ? ' pm' : ' am');\r\n\r\n  const toHours = toDate.getHours();\r\n  const toMinutes = toDate.getMinutes() < 10 ? ('0' + toDate.getMinutes()) : toDate.getMinutes();\r\n  const toAm = (toHours > 12 ? ' pm' : ' am');\r\n\r\n  alert.data.timeRange = `${fromHours}:${fromMinutes} ${fromAm} to ${toHours}:${toMinutes} ${toAm}`;\r\n}\r\n\r\nexport default function ActiveNotifications() {\r\n  const [alerts, setAlerts] = useState({wlgw: [], slgw: [], fetching: true});\r\n  const [fetched, setFetched] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (fetched) {\r\n      return;\r\n    }\r\n\r\n    const fleetStatus = JSON.parse(sessionStorage.getItem('fleetStatus'));\r\n\r\n    const wlgwThingName = encodeURI(fleetStatus.wlgw.thingName);\r\n    const slgwThingName = encodeURI(fleetStatus.slgw.thingName);\r\n\r\n    fetch(`/api/alerts/active?thingNames=${wlgwThingName}&thingNames=${slgwThingName}`)\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          setFetched(true);\r\n\r\n          response.json().then(alerts => {\r\n            alerts.fetching = false;\r\n\r\n            if (alerts.wlgw) {\r\n              alerts.wlgw.forEach(alert => enrichWithHumanReadableDate(alert));\r\n            }\r\n\r\n            if (alerts.slgw) {\r\n              alerts.slgw.forEach(alert => enrichWithHumanReadableDate(alert));\r\n            }\r\n\r\n            setAlerts(alerts);\r\n          });\r\n        }\r\n      }, error => {\r\n        console.log(error);\r\n      });\r\n\r\n  }, [alerts, fetched]);\r\n\r\n  return (\r\n    <div>\r\n      <h3>Today's Alerts</h3>\r\n      {alerts.fetching &&\r\n        <div className='d-flex justify-content-center'>\r\n            <div className='spinner-border m-5' role='status' style={{ width: '3rem', height: '3rem' }}></div>\r\n        </div>}\r\n      {!alerts.fetching && alerts.wlgw.length === 0 && alerts.slgw.length === 0 && <p className='fw-normal'>There are no active alerts.</p>}\r\n      {(alerts.wlgw.length > 0 || alerts.slgw.length > 0) && <p className='fw-normal'>There are some alerts which need to be addressed.</p>}\r\n      {alerts.wlgw.length > 0 && <p className='fw-bold'>For Overhead Water Tank</p>}\r\n      {alerts.wlgw?.length > 0 &&\r\n        alerts.wlgw.map((alert, index) => {\r\n        return (\r\n        <div key={index} className=\"row\">\r\n          {getAlertCard(alert)}\r\n        </div>)\r\n        })\r\n      }\r\n      {alerts.slgw.length > 0 && <p className='fw-bold'>For Sump Tank</p>}\r\n      {alerts.slgw?.length > 0 &&\r\n        alerts.slgw.map((alert, index) => {\r\n        return (\r\n          <div key={index} className=\"row\">\r\n            {getAlertCard(alert)}\r\n          </div>)\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}","import { useEffect, useState } from \"react\"\r\n\r\nfunction getAlertMessage(alert) {\r\n  switch (alert.type) {\r\n    case 'Leakage':\r\n      return ['Water flowed continuously!',\r\n                  <span>Water was continuously flowing at the rate of <span className='fw-bold'>{alert.data.mean} ltr</span>\r\n                  &nbsp;per minute between <span className='fw-bold'>{alert.data.timeRange}</span> on \r\n                  &nbsp;{new Date(alert.timestamp).toDateString()}</span>]\r\n    default:\r\n      return ['Attention']\r\n  }\r\n}\r\n\r\nfunction getAlertCard(alert) {\r\n  const [title, message] = getAlertMessage(alert);\r\n  return (\r\n    <div className=\"col-8\">\r\n      <div className='card mb-3 top-m-5'>\r\n        <div className='row g-0 h-100'>\r\n          <div className='col-md-4 bg-secondary'>\r\n            <div className='img-fluid rounded-start d-flex align-items-center justify-content-center'>\r\n              <i className='bi bi-droplet-half' style={{ fontSize: '07rem', color: 'cornflowerblue' }}></i>\r\n            </div>\r\n          </div>\r\n          <div className='col-md-8'>\r\n            <div className='card-body'>\r\n              <h5 className='card-title'>{title}</h5>\r\n              <p className='card-text'>{message}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction enrichWithHumanReadableDate(alert) {\r\n  const fromDate = new Date(alert.data.fromTimestamp);\r\n  const toDate = new Date(alert.data.toTimestamp);\r\n\r\n  const fromHours = fromDate.getHours();\r\n  const fromMinutes = fromDate.getMinutes();\r\n  const fromAm = (fromHours > 12 ? ' pm' : ' am');\r\n\r\n  const toHours = toDate.getHours();\r\n  const toMinutes = toDate.getMinutes();\r\n  const toAm = (toHours > 12 ? ' pm' : ' am');\r\n\r\n  alert.data.timeRange = `${fromHours}:${fromMinutes} ${fromAm} to ${toHours}:${toMinutes} ${toAm}`;\r\n}\r\n\r\nexport default function NotificationsHistory() {\r\n  const [alerts, setAlerts] = useState({wlgw: [], slgw: [], fetching: true});\r\n  const [fetched, setFetched] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (fetched) {\r\n      return;\r\n    }\r\n\r\n    const fleetStatus = JSON.parse(sessionStorage.getItem('fleetStatus'));\r\n\r\n    const wlgwThingName = encodeURI(fleetStatus.wlgw.thingName);\r\n    const slgwThingName = encodeURI(fleetStatus.slgw.thingName);\r\n\r\n    fetch(`/api/alerts/history?thingNames=${wlgwThingName}&thingNames=${slgwThingName}`)\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          setFetched(true);\r\n\r\n          response.json().then(alerts => {\r\n            alerts.fetching = false;\r\n\r\n            if (alerts.wlgw) {\r\n              alerts.wlgw.forEach(alert => enrichWithHumanReadableDate(alert));\r\n            }\r\n\r\n            if (alerts.slgw) {\r\n              alerts.slgw.forEach(alert => enrichWithHumanReadableDate(alert));\r\n            }\r\n\r\n            setAlerts(alerts);\r\n          });\r\n        }\r\n      });\r\n\r\n  }, [alerts, fetched]);\r\n\r\n  return (\r\n    <div>\r\n    <h3>Alerts History</h3>\r\n      {alerts.fetching &&\r\n        <div className='d-flex justify-content-center'>\r\n            <div className='spinner-border m-5' role='status' style={{ width: '3rem', height: '3rem' }}></div>\r\n        </div>}\r\n      {!alerts.fetching && alerts.wlgw.length === 0 && alerts.slgw.length === 0 && <p className='fw-normal'>There are no alerts.</p>}\r\n      {alerts.wlgw.length > 0 && <p className='fw-bold'>For Overhead Water Tank</p>}\r\n      {alerts.wlgw?.length > 0 &&\r\n        alerts.wlgw.map((alert, index) => {\r\n        return (\r\n        <div key={index} className=\"row\">\r\n          {getAlertCard(alert)}\r\n        </div>)\r\n        })\r\n      }\r\n      {alerts.slgw.length > 0 && <p className='fw-bold'>For Sump Tank</p>}\r\n      {alerts.slgw?.length > 0 &&\r\n        alerts.slgw.map((alert, index) => {\r\n        return (\r\n          <div key={index} className=\"row\">\r\n            {getAlertCard(alert)}\r\n          </div>)\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}","import { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router';\r\nimport { useAuth } from '../../components/authprovider';\r\n\r\nfunction getAlertLevel(timestamp) {\r\n  const now = Date.now();\r\n  const diffInMill = (now - timestamp);\r\n  \r\n  if (diffInMill >= (5*60*1000) && diffInMill <= (10*60*1000)) {\r\n    return 'warning';\r\n  }\r\n\r\n  if (diffInMill > (10*60*1000)) {\r\n    return 'danger';\r\n  }\r\n\r\n  return 'secondary';\r\n}\r\n\r\nfunction getAlertMessage(timestamp) {\r\n  const now = Date.now();\r\n  const diffInMill = (now - timestamp);\r\n  \r\n  const late = diffInMill >= (5*60*1000) && diffInMill <= (10*60*1000);\r\n  const tooLate = diffInMill > (10*60*1000);\r\n\r\n  if (late || tooLate) {\r\n    return (\r\n      <p className='card-text'>\r\n        The overhead water tank is <span className='fw-bold'>OFFLINE</span><br/><br/>\r\n        {late && !tooLate && 'It has not communicated since last 10 minutes.'}\r\n        {tooLate && 'It has has been more than 10 minutes since it last communicated.'}\r\n      </p>)\r\n  } else {\r\n    return (<p className='card-text'>\r\n      The overhead water tank is <span className='fw-bold'>ONLINE</span></p>)\r\n  }\r\n}\r\n\r\nfunction getHumanReadableDateTime(timestamp) {\r\n  let date = new Date(timestamp);\r\n  return date.toLocaleString()\r\n}\r\n\r\nexport default function MonitorPage() {\r\n    const auth = useAuth();\r\n    const [status, setStatus] = useState(undefined);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (status) {\r\n            return;\r\n        }\r\n\r\n        const cachedStatus = sessionStorage.getItem('fleetStatus');\r\n        if (cachedStatus) {\r\n            setStatus(JSON.parse(cachedStatus));\r\n            return;\r\n        }\r\n\r\n        fetch('/api/status').then(response => {\r\n            if (response.status >= 200 && response.status < 400) {\r\n                response.json().then(body => {\r\n                    setStatus(body);\r\n                    sessionStorage.setItem('fleetStatus', JSON.stringify(body));\r\n                });\r\n            } else {\r\n                response.text().then(data => {\r\n                    console.log(data);\r\n                })\r\n            }\r\n        });\r\n    }, [status, auth, navigate]);\r\n\r\n    function refreshStatus() {\r\n        sessionStorage.removeItem('fleetStatus');\r\n        setStatus(null);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h3>Fleet Status</h3>\r\n            <p className='fw-normal'>This page shows whether all the components of your system are online.</p>\r\n            {!status && <p className='fw-normal'>Please wait while we fetch the details...</p>}\r\n            {!status &&\r\n                <div className='d-flex justify-content-center'>\r\n                    <div className='spinner-border m-5' role='status' style={{ width: '3rem', height: '3rem' }}></div>\r\n                </div>}\r\n            {status &&\r\n                <div className=\"row\">\r\n                    <div className=\"col-8\">\r\n                        <p className='d-flex justify-content-end'>\r\n                            <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={refreshStatus}>Refresh</button>\r\n                        </p>\r\n                        <div className='card mb-3 top-m-5'>\r\n                            <div className='row g-0 h-100'>\r\n                                <div className={'col-md-4 bg-' + getAlertLevel(status.wlgw.timestamp)}>\r\n                                    <div className='img-fluid rounded-start d-flex align-items-center justify-content-center'>\r\n                                        <i className='bi bi-water' style={{ fontSize: '07rem', color: 'cornflowerblue' }}></i>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='col-md-8'>\r\n                                    <div className='card-body'>\r\n                                        <h5 className='card-title'>Overhead Tank</h5>\r\n                                        {getAlertMessage(status.wlgw.timestamp)}\r\n                                        <p className='card-text'><small className='text-muted'>Received last update on {getHumanReadableDateTime(status.wlgw.timestamp)}</small></p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n            {status && status.slgw &&\r\n                <div className=\"row\">\r\n                  <div className=\"col-8\">\r\n                    <div className='card mb-3 top-m-5'>\r\n                        <div className='row g-0 h-100'>\r\n                            <div className={'col-md-4 bg-' + getAlertLevel(status.slgw.timestamp)}>\r\n                                <div className='img-fluid rounded-start d-flex align-items-center justify-content-center'>\r\n                                    <i className='bi bi-moisture' style={{ fontSize: '07rem', color: 'cornflowerblue' }}></i>\r\n                                </div>\r\n                            </div>\r\n                            <div className='col-md-8'>\r\n                                <div className='card-body'>\r\n                                    <h5 className='card-title'>Sump Tank</h5>\r\n                                    {getAlertMessage(status.slgw.timestamp)}\r\n                                    <p className='card-text'><small className='text-muted'>Received last update on {getHumanReadableDateTime(status.slgw.timestamp)}</small></p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nimport LoginPage from './routes/login.jsx';\nimport AuthProvider from './components/authprovider';\n\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport CheckSession from './components/checksession';\nimport SummaryPage from './routes/dashboard/summary';\nimport UsagePage from './routes/dashboard/usage';\nimport CurrentSchedule from './routes/schedules/current';\nimport FleetHub from './routes/status/fleet';\nimport ActiveNotifications from './routes/alerts/active';\nimport NotificationsHistory from './routes/alerts/history';\nimport MonitorPage from './routes/dashboard/monitor';\n\nReactDOM.render(\n  <React.StrictMode>\n      <AuthProvider>\n        <BrowserRouter>\n          <Routes>\n              <Route path='/login' element={<LoginPage/>}/>\n              <Route path='/' element={<CheckSession><App/></CheckSession>}>\n                <Route path='/dashboard/summary' element={<CheckSession><SummaryPage/></CheckSession>}/>\n                <Route path='/dashboard/usage' element={<CheckSession><UsagePage/></CheckSession>}/>\n                <Route path='/dashboard/monitor' element={<CheckSession><MonitorPage/></CheckSession>}/>\n                <Route path='/schedules/current' element={<CheckSession><CurrentSchedule/></CheckSession>}/>\n                <Route path='/status/fleet' element={<CheckSession><FleetHub/></CheckSession>}/>\n                <Route path='/alerts/active' element={<CheckSession><ActiveNotifications/></CheckSession>}/>\n                <Route path='/alerts/history' element={<CheckSession><NotificationsHistory/></CheckSession>}/>\n              </Route>\n          </Routes>\n        </BrowserRouter>\n      </AuthProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}