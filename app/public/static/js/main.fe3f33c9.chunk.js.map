{"version":3,"sources":["components/authprovider.jsx","components/navbar.jsx","components/explorer.jsx","app.jsx","routes/login.jsx","components/checksession.jsx","routes/dashboard/summary.jsx","routes/dashboard/usage.jsx","routes/schedules/current.jsx","routes/alerts/active.jsx","index.jsx"],"names":["AuthContext","createContext","useAuth","useContext","AuthProvider","children","useState","user","setUser","Provider","value","signIn","email","pin","cb","body","JSON","stringify","request","Request","method","headers","fetch","then","response","status","json","ok","error","console","log","catch","text","signOut","Navbar","auth","navigate","useNavigate","className","to","id","fullName","onClick","replace","ContentExplorer","location","useLocation","getClassName","path","pathname","endsWith","useEffect","style","width","borderTop","marginTop","App","height","queried","LoginPage","sessionChecked","setSessionChecked","authenticating","setAuthenticating","lastLoc","state","from","onSubmit","event","preventDefault","formData","FormData","currentTarget","get","name","type","placeholder","required","htmlFor","disabled","role","href","CheckSession","SummaryPage","setStatus","data","maxWidth","fontSize","color","wlgw","volume","ago","Date","timestamp","UsagePage","CurrentSchedule","ActiveNotifications","ReactDOM","render","StrictMode","element","document","getElementById"],"mappings":"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","file":"static/js/main.fe3f33c9.chunk.js","sourcesContent":["import { createContext, useContext, useState } from 'react';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n    return useContext(AuthContext);\r\n}\r\n\r\nexport default function AuthProvider({children}) {\r\n    let [user, setUser] = useState();\r\n\r\n    let signIn = (email, pin, cb) => {\r\n        const body = JSON.stringify({\r\n            email: email,\r\n            pin: pin\r\n        });\r\n\r\n        const request = new Request('api/login', {\r\n            method: 'POST',\r\n            body: body,\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        \r\n        fetch(request).then(response => {\r\n            if (response.status >= 200 && response.status < 500) {\r\n                response.json().then(body => {\r\n                    setUser(response.ok ? body : null);\r\n                    cb(response.ok ? null : body);\r\n                }, error => {\r\n                    console.log(error);\r\n                }).catch(error => {\r\n                    console.log(error);\r\n                });\r\n            } else {\r\n                response.text().then(body => {\r\n                    setUser(null);\r\n                    cb();\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    let signOut = (email, cb) => {\r\n        const request = new Request('/api/logout', {method: 'POST', body: JSON.stringify({'email': email})});\r\n\r\n        fetch(request).then(response => {\r\n            setUser(null);\r\n            cb();\r\n        });\r\n    }\r\n\r\n    return <AuthContext.Provider value={{user, signIn, signOut}}>{children}</AuthContext.Provider>;\r\n}","import { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from './authprovider';\r\n\r\nexport default function Navbar() {\r\n    const auth = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    function logout() {\r\n        auth.signOut(auth.user?.email, () => {\r\n            navigate('/login', {replace: true});\r\n        });\r\n    }\r\n\r\n    return (\r\n        <nav className='navbar navbar-expand-lg navbar-light bg-light'>\r\n            <div className='container'>\r\n                <h1><Link className='navbar-brand' to='/dashboard/summary'>Smart Water Level Controller</Link></h1>\r\n                <div className='collapse navbar-collapse' id='navbarSupportedContent'>\r\n                    <ul className='d-flex navbar-nav me-auto mb-2 mb-lg-0'></ul>\r\n                    <div className='nav-item dropdown d-flex'>\r\n                        <div className='nav-item dropdown'>\r\n                            <button className='btn btn-secondary btn-sm dropdown-toggle' id='navbarDropdown' data-bs-toggle='dropdown' aria-expanded='false'>\r\n                                {auth.user?.fullName}\r\n                            </button>\r\n                            <ul className='dropdown-menu' aria-labelledby='navbarDropdown'>\r\n                                <li><button className='dropdown-item' onClick={logout}>Logout</button></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    )\r\n}","import { useEffect } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\n\r\nconst grpCls = 'list-group-item';\r\nconst actGrpCls = 'list-group-item active';\r\n\r\nexport default function ContentExplorer() {\r\n\tconst location = useLocation();\r\n\tconst navigate = useNavigate();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (location.pathname === '/') {\r\n\t\t\tnavigate('/dashboard/summary', {replace: true});\r\n\t\t}\r\n\t}, [location, navigate]);\r\n\r\n\tfunction getClassName(path) {\r\n\t\treturn location.pathname.endsWith(path) ? actGrpCls : grpCls;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='card shadow' style={{ width: '18rem' }}>\r\n\t\t\t<div className='card-header'>\r\n\t\t\t\t<h5 className='card-title'>Dashboard</h5>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-body'>\r\n\t\t\t\t<ul className='list-group list-group-flush'>\r\n\t\t\t\t\t<Link to='/dashboard/summary' className={getClassName('/dashboard/summary')}>Summary</Link>\r\n\t\t\t\t\t<Link to='/dashboard/usage'className={getClassName('/dashboard/usage')}>Usage</Link>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-header' style={{borderTop: '1px solid rgba(0,0,0,.125)'}}>\r\n\t\t\t\t<h5 className='card-title' style={{ marginTop: '10px' }}>Schedules</h5>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-body'>\r\n\t\t\t\t<ul className='list-group list-group-flush'>\r\n\t\t\t\t\t<Link to='/schedules/current' className={getClassName('/schedules/current')}>Today's Schedule</Link>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-header' style={{borderTop: '1px solid rgba(0,0,0,.125)'}}>\r\n\t\t\t\t<h5 className='card-title' style={{ marginTop: '10px' }}>Notifications</h5>\r\n\t\t\t</div>\r\n\t\t\t<div className='card-body'>\r\n\t\t\t\t<ul className='list-group list-group-flush'>\r\n\t\t\t\t\t<Link to='/alerts/active' className={getClassName('/alerts/active')}>Active</Link>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}","import { Outlet } from 'react-router-dom';\nimport Navbar from './components/navbar';\nimport ContentExplorer from './components/explorer';\n\nfunction App() {\n  return (\n    <div style={{ height: '100%' }}>\n      <Navbar/>\n      <div className='container'>\n        <div className='row' style={{ marginTop: '10px' }}>\n          <div className='col-3'><ContentExplorer/></div>\n          <div className='col'>\n            <Outlet />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;","import { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router';\r\nimport { useAuth } from '../components/authprovider';\r\n\r\nlet queried = false;\r\n\r\nfunction LoginPage() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation()\r\n  const auth = useAuth();\r\n\r\n  const [sessionChecked, setSessionChecked] = useState(false);\r\n  const [authenticating, setAuthenticating] = useState(false);\r\n\r\n  let lastLoc = location.state?.from?.pathname || '/';\r\n\r\n  function doLogin(event) {\r\n    event.preventDefault();\r\n    \r\n    setAuthenticating(true);\r\n    let formData = new FormData(event.currentTarget);\r\n    \r\n    let email = formData.get('email');\r\n    let pin = formData.get('pin');\r\n\r\n    auth.signIn(email, pin, (error) => {\r\n      if (!error) {\r\n        navigate(lastLoc, {replace: true});\r\n      } else {\r\n        setAuthenticating(false);\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!auth.user && !sessionChecked) {\r\n      if (!queried) {\r\n        queried = true;\r\n        fetch('/api/session').then(response => {\r\n            if (response.status === 200) {\r\n                response.json().then(body => {\r\n                    auth.user = body;\r\n                    navigate('/', {replace: true});\r\n                });\r\n            } else {\r\n                setSessionChecked(true);\r\n            }\r\n        });\r\n      } else {\r\n        setSessionChecked(true);\r\n      }\r\n    } else {\r\n      setSessionChecked(true);\r\n    }\r\n\r\n    return () => {\r\n        setSessionChecked(true);\r\n    }\r\n  }, [sessionChecked, auth, navigate]);\r\n\r\n  if (sessionChecked && !auth.user) {\r\n    return(\r\n      <div className='container vh-100'>\r\n        <div className='row align-items-center vh-100'>\r\n            <div className='col'></div>\r\n            <div className='col'>\r\n              <form onSubmit={doLogin}>\r\n                <h3>Sign in</h3>\r\n                <div className='form-floating mb-3'>\r\n                  <input name='email' type='email' className='form-control' id='floatingInput' placeholder='name@example.com' required></input>\r\n                  <label htmlFor='floatingInput'>Email address</label>\r\n                </div>\r\n                <div className='form-floating'>\r\n                  <input name='pin' type='password' className='form-control' id='floatingPassword' placeholder='Pin' required></input>\r\n                  <label htmlFor='floatingPassword'>Pin</label>\r\n                </div>\r\n                <button type='submit' className='btn btn-primary' style={{marginTop: '10px'}} disabled={authenticating}>\r\n                  {authenticating && <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>}\r\n                  {authenticating && ' Sign in'}\r\n                  {!authenticating && 'Sign in'}\r\n                </button>\r\n                <div className='form-text'>Not registered? <a href='/register' className='link-primary'>Register here</a></div>\r\n              </form>\r\n            </div>\r\n            <div className='col'></div>\r\n          </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return <div></div>\r\n  }\r\n}\r\n\r\nexport default LoginPage;","import { useEffect, useState } from 'react';\r\nimport { Navigate, useLocation } from 'react-router';\r\nimport { useAuth } from './authprovider';\r\n\r\nexport default function CheckSession({children}) {\r\n    const [sessionChecked, setSessionChecked] = useState(false);\r\n\r\n    const auth = useAuth();\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        if (!auth.user && !sessionChecked) {\r\n            fetch('/api/session').then(response => {\r\n                if (response.status === 200) {\r\n                    response.json().then(body => {\r\n                        auth.user = body;\r\n                        setSessionChecked(true);\r\n                    });\r\n                } else {\r\n                    setSessionChecked(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            setSessionChecked(true);\r\n        }\r\n    }, [sessionChecked, auth]);\r\n\r\n    if (!auth.user) {\r\n        if (sessionChecked) {\r\n            return (<Navigate to='/login' state={{from: location}}></Navigate>);\r\n        } else {\r\n            return <div></div>\r\n        }\r\n    }\r\n\r\n    return children;\r\n}","import { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router';\r\nimport { useAuth } from '../../components/authprovider';\r\nimport ago from 's-ago';\r\n\r\nexport default function SummaryPage() {\r\n    const auth = useAuth();\r\n    const [status, setStatus] = useState();\r\n    const navigate = useNavigate();\r\n    \r\n    useEffect(() => {\r\n        if (status) {\r\n            return;\r\n        }\r\n        fetch('/api/status').then(response => {\r\n            if (response.status >= 200 && response.status < 400) {\r\n                response.json().then(body => {\r\n                   setStatus(body);\r\n                });\r\n            } else {\r\n                response.text().then(data => {\r\n                    console.log(data);\r\n                })\r\n            }\r\n          });\r\n    }, [status, auth, navigate]);\r\n\r\n    return (\r\n        <div>\r\n            <h3>Status</h3>\r\n            <p className='fw-normal'>This page shows the current status of the water management system in your apartment.</p>\r\n            {!status && <p className='fw-normal'>Please wait while we fetch latest water levels in your aparment...</p>}\r\n            {!status && \r\n            <div className='d-flex justify-content-center'>\r\n                <div className='spinner-border m-5' role='status' style={{width: '3rem', height: '3rem'}}></div>\r\n            </div>}\r\n            {status &&\r\n                <div className='card mb-3 top-m-5' style={{maxWidth: '540px'}}>\r\n                    <div className='row g-0'>\r\n                        <div className='col-md-4 bg-secondary'>\r\n                            <div className='img-fluid rounded-start d-flex align-items-center justify-content-center'>\r\n                                <i className='bi bi-water' style={{fontSize: '07rem', color: 'cornflowerblue'}}></i>\r\n                            </div>\r\n                        </div>\r\n                        <div className='col-md-8'>\r\n                            <div className='card-body'>\r\n                                <h5 className='card-title'>Overhead Tank</h5>\r\n                                <p className='card-text'>The overhead water tank has <span className='fw-bold'>{status.wlgw.volume}</span> liters of water.</p>\r\n                                <p className='card-text'><small className='text-muted'>Last updated {ago(new Date(status.wlgw.timestamp))}</small></p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}","export default function UsagePage() {\r\n  return <h1>Usage</h1>\r\n}","export default function CurrentSchedule() {\r\n  return <h1>Today's schedule</h1>\r\n}","export default function ActiveNotifications() {\r\n  return <h1>Active notifications</h1>\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nimport LoginPage from './routes/login.jsx';\nimport AuthProvider from './components/authprovider';\n\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport CheckSession from './components/checksession';\nimport SummaryPage from './routes/dashboard/summary';\nimport UsagePage from './routes/dashboard/usage';\nimport CurrentSchedule from './routes/schedules/current';\nimport ActiveNotifications from './routes/alerts/active';\n\nReactDOM.render(\n  <React.StrictMode>\n      <AuthProvider>\n        <BrowserRouter>\n          <Routes>\n              <Route path='/login' element={<LoginPage/>}/>\n              <Route path='/' element={<CheckSession><App/></CheckSession>}>\n                <Route path='/dashboard/summary' element={<CheckSession><SummaryPage/></CheckSession>}/>\n                <Route path='/dashboard/usage' element={<CheckSession><UsagePage/></CheckSession>}/>\n                <Route path='/schedules/current' element={<CheckSession><CurrentSchedule/></CheckSession>}/>\n                <Route path='/alerts/active' element={<CheckSession><ActiveNotifications/></CheckSession>}/>\n              </Route>\n          </Routes>\n        </BrowserRouter>\n      </AuthProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}