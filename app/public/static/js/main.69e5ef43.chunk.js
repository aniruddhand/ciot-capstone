(this["webpackJsonprouter-tutorial"]=this["webpackJsonprouter-tutorial"]||[]).push([[0],{303:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s.n(c),n=s(76),l=s.n(n),r=s(8),i=s(25),d=s(10),o=s(1),j=Object(c.createContext)();function m(){return Object(c.useContext)(j)}function h(e){var t=e.children,s=Object(c.useState)(),a=Object(d.a)(s,2),n=a[0],l=a[1];return Object(o.jsx)(j.Provider,{value:{user:n,signIn:function(e,t,s){var c=JSON.stringify({email:e,pin:t}),a=new Request("api/login",{method:"POST",body:c,headers:{"Content-Type":"application/json"}});fetch(a).then((function(e){e.status>=200&&e.status<500?e.json().then((function(t){l(e.ok?t:null),s(e.ok?null:t)}),(function(e){console.log(e)})).catch((function(e){console.log(e)})):e.text().then((function(e){l(null),s()}))}))},signOut:function(e,t){var s=new Request("/api/logout",{method:"POST",body:JSON.stringify({email:e})});fetch(s).then((function(e){l(null),t()}))}},children:t})}function b(){var e,t=m(),s=Object(r.h)();return Object(o.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{children:Object(o.jsx)(i.b,{className:"navbar-brand",to:"/dashboard/summary",children:"Smart Water Level Controller"})}),Object(o.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(o.jsx)("ul",{className:"d-flex navbar-nav me-auto mb-2 mb-lg-0"}),Object(o.jsx)("div",{className:"nav-item dropdown d-flex",children:Object(o.jsxs)("div",{className:"nav-item dropdown",children:[Object(o.jsx)("button",{className:"btn btn-secondary btn-sm dropdown-toggle",id:"navbarDropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:null===(e=t.user)||void 0===e?void 0:e.fullName}),Object(o.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:Object(o.jsx)("li",{children:Object(o.jsx)("button",{className:"dropdown-item",onClick:function(){var e;t.signOut(null===(e=t.user)||void 0===e?void 0:e.email,(function(){s("/login",{replace:!0})}))},children:"Logout"})})})]})})]})]})})}function u(){var e=Object(r.g)(),t=Object(r.h)();function s(t){return e.pathname.endsWith(t)?"list-group-item active":"list-group-item"}return Object(c.useEffect)((function(){"/"===e.pathname&&t("/dashboard/summary",{replace:!0})}),[e,t]),Object(o.jsxs)("div",{className:"card shadow",style:{width:"18rem"},children:[Object(o.jsx)("div",{className:"card-header",children:Object(o.jsx)("h5",{className:"card-title",children:"Dashboard"})}),Object(o.jsx)("div",{className:"card-body",children:Object(o.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(o.jsx)(i.b,{to:"/dashboard/summary",className:s("/dashboard/summary"),children:"Summary"}),Object(o.jsx)(i.b,{to:"/dashboard/usage",className:s("/dashboard/usage"),children:"Usage"}),Object(o.jsx)(i.b,{to:"/dashboard/monitor",className:s("/dashboard/monitor"),children:"Monitor"})]})}),Object(o.jsx)("div",{className:"card-header",style:{borderTop:"1px solid rgba(0,0,0,.125)"},children:Object(o.jsx)("h5",{className:"card-title",style:{marginTop:"10px"},children:"Schedules"})}),Object(o.jsx)("div",{className:"card-body",children:Object(o.jsx)("ul",{className:"list-group list-group-flush",children:Object(o.jsx)(i.b,{to:"/schedules/current",className:s("/schedules/current"),children:"Water Pump"})})}),Object(o.jsx)("div",{className:"card-header",style:{borderTop:"1px solid rgba(0,0,0,.125)"},children:Object(o.jsx)("h5",{className:"card-title",style:{marginTop:"10px"},children:"Alerts"})}),Object(o.jsx)("div",{className:"card-body",children:Object(o.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(o.jsx)(i.b,{to:"/alerts/active",className:s("/alerts/active"),children:"Active"}),Object(o.jsx)(i.b,{to:"/alerts/history",className:s("/alerts/history"),children:"History"})]})})]})}var O=function(){return Object(o.jsxs)("div",{style:{height:"100%"},children:[Object(o.jsx)(b,{}),Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"row",style:{marginTop:"10px"},children:[Object(o.jsx)("div",{className:"col-3",children:Object(o.jsx)(u,{})}),Object(o.jsx)("div",{className:"col",children:Object(o.jsx)(r.b,{})})]})})]})},x=!1;var f=function(){var e,t,s=Object(r.h)(),a=Object(r.g)(),n=m(),l=Object(c.useState)(!1),i=Object(d.a)(l,2),j=i[0],h=i[1],b=Object(c.useState)(!1),u=Object(d.a)(b,2),O=u[0],f=u[1],g=(null===(e=a.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";return Object(c.useEffect)((function(){return n.user||j||x?h(!0):(x=!0,fetch("/api/session").then((function(e){200===e.status?e.json().then((function(e){n.user=e,s("/",{replace:!0})})):h(!0)}))),function(){h(!0)}}),[j,n,s]),j&&!n.user?Object(o.jsx)("div",{className:"container vh-100",children:Object(o.jsxs)("div",{className:"row align-items-center vh-100",children:[Object(o.jsx)("div",{className:"col"}),Object(o.jsx)("div",{className:"col",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(!0);var t=new FormData(e.currentTarget),c=t.get("email"),a=t.get("pin");n.signIn(c,a,(function(e){e?(f(!1),console.log(e)):s(g,{replace:!0})}))},children:[Object(o.jsx)("h3",{children:"Sign in"}),Object(o.jsxs)("div",{className:"form-floating mb-3",children:[Object(o.jsx)("input",{name:"email",type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",required:!0}),Object(o.jsx)("label",{htmlFor:"floatingInput",children:"Email address"})]}),Object(o.jsxs)("div",{className:"form-floating",children:[Object(o.jsx)("input",{name:"pin",type:"password",className:"form-control",id:"floatingPassword",placeholder:"Pin",required:!0}),Object(o.jsx)("label",{htmlFor:"floatingPassword",children:"Pin"})]}),Object(o.jsxs)("button",{type:"submit",className:"btn btn-primary",style:{marginTop:"10px"},disabled:O,children:[O&&Object(o.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),O&&" Sign in",!O&&"Sign in"]}),Object(o.jsxs)("div",{className:"form-text",children:["Not registered? ",Object(o.jsx)("a",{href:"/register",className:"link-primary",children:"Register here"})]})]})}),Object(o.jsx)("div",{className:"col"})]})}):Object(o.jsx)("div",{})};function g(e){var t=e.children,s=Object(c.useState)(!1),a=Object(d.a)(s,2),n=a[0],l=a[1],i=m(),j=Object(r.g)();return Object(c.useEffect)((function(){return i.user||n||fetch("/api/session").then((function(e){200===e.status?e.json().then((function(e){i.user=e,l(!0)})):l(!0)})),function(){l(!0)}}),[n,i]),i.user?t:n?Object(o.jsx)(r.a,{to:"/login",state:{from:j}}):Object(o.jsx)("div",{})}var p=s(51),v=s.n(p);function w(){var e=m(),t=Object(c.useState)(void 0),s=Object(d.a)(t,2),a=s[0],n=s[1],l=Object(r.h)();return Object(c.useEffect)((function(){if(!a){var e=sessionStorage.getItem("fleetStatus");e?n(JSON.parse(e)):fetch("/api/status").then((function(e){e.status>=200&&e.status<400?e.json().then((function(e){n(e),sessionStorage.setItem("fleetStatus",JSON.stringify(e))})):e.text().then((function(e){console.log(e)}))}))}}),[a,e,l]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Summary"}),Object(o.jsx)("p",{className:"fw-normal",children:"This page a brief summary of various components of the water management system in your apartment."}),!a&&Object(o.jsx)("p",{className:"fw-normal",children:"Please wait while we fetch latest water levels in your aparment..."}),!a&&Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)("div",{className:"spinner-border m-5",role:"status",style:{width:"3rem",height:"3rem"}})}),a&&Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-8",children:[Object(o.jsx)("p",{className:"d-flex justify-content-end",children:Object(o.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){sessionStorage.removeItem("fleetStatus"),n(null)},children:"Refresh"})}),Object(o.jsx)("div",{className:"card mb-3 top-m-5",children:Object(o.jsxs)("div",{className:"row g-0 h-100",children:[Object(o.jsx)("div",{className:"col-md-4 bg-secondary",children:Object(o.jsx)("div",{className:"img-fluid rounded-start d-flex align-items-center justify-content-center",children:Object(o.jsx)("i",{className:"bi bi-water",style:{fontSize:"07rem",color:"cornflowerblue"}})})}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{className:"card-title",children:"Overhead Tank"}),Object(o.jsxs)("p",{className:"card-text",children:["The overhead water tank has ",Object(o.jsx)("span",{className:"fw-bold",children:a.wlgw.volume})," liters of water."]}),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsxs)("small",{className:"text-muted",children:["Last updated ",v()(new Date(a.wlgw.timestamp))]})})]})})]})})]})}),a&&a.slgw&&Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-8",children:Object(o.jsx)("div",{className:"card mb-3 top-m-5",children:Object(o.jsxs)("div",{className:"row g-0 h-100",children:[Object(o.jsx)("div",{className:"col-md-4 bg-secondary",children:Object(o.jsx)("div",{className:"img-fluid rounded-start d-flex align-items-center justify-content-center",children:Object(o.jsx)("i",{className:"bi bi-moisture",style:{fontSize:"07rem",color:"cornflowerblue"}})})}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{className:"card-title",children:"Sump Tank"}),Object(o.jsxs)("p",{className:"card-text",children:["The sump tank has ",Object(o.jsx)("span",{className:"fw-bold",children:a.slgw.volume})," liters of water."]}),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsxs)("small",{className:"text-muted",children:["Last updated ",v()(new Date(a.slgw.timestamp))]})})]})})]})})})}),a&&a.pump&&!1]})}var N=s(305),y=s(158),S=s(309),T=s(155),k=s(156),I=s(67);function D(){var e=Object(c.useState)(),t=Object(d.a)(e,2),s=t[0],a=t[1];return Object(c.useEffect)((function(){if(!s){var e=sessionStorage.getItem("fleetUsage");if(e)a(JSON.parse(e));else{var t=JSON.parse(sessionStorage.getItem("fleetStatus")),c=Date.now(),n=new Date(c),l=c-60*n.getHours()*60*1e3-60*n.getMinutes()*1e3-1e3*n.getSeconds(),r=l+828e5+354e4+59e3,i={wlGWThingName:t.wlgw.thingName,slGWThingName:t.slgw.thingName,fromTimestamp:l,toTimestamp:r};fetch("/api/timeseries/usage",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(e){if(200===e.status){var t={wlgw:[]};e.json().then((function(e){if(e.wlgw&&e.wlgw.length){var s=0;e.wlgw.forEach((function(e){if(e.volume!==s){var c=new Date(e.timestamp);e.datetime=c.getHours()+":"+c.getMinutes()+" "+(c.getHours()<12?"am":"pm"),t.wlgw.push(e),s=e.volume}}))}a(t),sessionStorage.setItem("fleetUsage",JSON.stringify(t))}))}}))}}}),[s]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Today's Usage"}),Object(o.jsx)("p",{className:"fw-normal",children:"This page shows overhead tank's water levels in today's time period."}),Object(o.jsx)("p",{className:"d-flex justify-content-end",children:Object(o.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){sessionStorage.removeItem("fleetUsage"),a(null)},children:"Refresh"})}),!s&&Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)("div",{className:"spinner-border m-5",role:"status",style:{width:"3rem",height:"3rem"}})}),s&&Object(o.jsxs)(N.a,{width:900,height:400,data:s.wlgw,children:[Object(o.jsx)(y.a,{type:"monotone",dataKey:"volume",stroke:"#ff7300"}),Object(o.jsx)(S.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(o.jsx)(T.a,{dataKey:"datetime"}),Object(o.jsx)(k.a,{}),Object(o.jsx)(I.a,{})]})]})}function E(){var e=Object(c.useState)({startsOn:{minLevel:600},endsOn:{maxLevel:1500},lastUpdatedOn:new Date(1636494845e3)}),t=Object(d.a)(e,1)[0];return Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Water pump schedule"}),Object(o.jsx)("p",{className:"fw-normal",children:"This page shows the current schedule of your water pumping system."}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-8",children:Object(o.jsx)("div",{className:"card mb-3 top-m-5",children:Object(o.jsxs)("div",{className:"row g-0",children:[Object(o.jsx)("div",{className:"col-md-4 bg-secondary",children:Object(o.jsx)("div",{className:"img-fluid rounded-start d-flex align-items-center justify-content-center h-100",children:Object(o.jsx)("i",{className:"bi bi-calendar2-date-fill",style:{fontSize:"07rem",color:"cornflowerblue"}})})}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{className:"card-title",children:"Pump timings"}),"Current schedule of your water pump is as follows:",Object(o.jsx)("p",{}),Object(o.jsx)("h6",{children:"Turns on"}),Object(o.jsxs)("p",{className:"card-text",children:["Whenever water level drops below\xa0",Object(o.jsx)("span",{className:"fw-bold",children:t.startsOn.minLevel})," liters."]}),Object(o.jsx)("h6",{children:"Turns off"}),Object(o.jsxs)("p",{className:"card-text",children:["Whenever water level reaches\xa0",Object(o.jsx)("span",{className:"fw-bold",children:t.endsOn.maxLevel})," liters."]}),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsxs)("small",{className:"text-muted",children:["Updated ",v()(t.lastUpdatedOn)]})})]})})]})})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"d-flex col-8 justify-content-end gx-0",children:Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"btn btn-primary bg-lt",children:"Change schedule"})})})})]})]})}function R(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Fleet Hub"}),Object(o.jsx)("p",{className:"fw-normal",children:"This page shows current status of your devices."})]})}function J(e){var t=function(e){return"Leakage"===e.type?["Water flowed continuously!",Object(o.jsxs)("span",{children:["Water was continuously flowing at a rate of ",Object(o.jsxs)("span",{className:"fw-bold",children:[Math.round(e.data.mean)," ltr"]}),"\xa0per minute between ",Object(o.jsx)("span",{className:"fw-bold",children:e.data.timeRange})," on \xa0",new Date(e.timestamp).toDateString()]})]:["Attention"]}(e),s=Object(d.a)(t,2),c=s[0],a=s[1];return Object(o.jsx)("div",{className:"col-8",children:Object(o.jsx)("div",{className:"card mb-3 top-m-5",children:Object(o.jsxs)("div",{className:"row g-0 h-100",children:[Object(o.jsx)("div",{className:"col-md-4 bg-warning",children:Object(o.jsx)("div",{className:"img-fluid rounded-start d-flex align-items-center justify-content-center",children:Object(o.jsx)("i",{className:"bi bi-droplet-half",style:{fontSize:"07rem",color:"red"}})})}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{className:"card-title",children:c}),Object(o.jsx)("p",{className:"card-text",children:a})]})})]})})})}function W(e){var t=new Date(e.data.fromTimestamp),s=new Date(e.data.toTimestamp),c=t.getHours(),a=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),n=c>12?" pm":" am",l=s.getHours(),r=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes(),i=l>12?" pm":" am";e.data.timeRange="".concat(c,":").concat(a," ").concat(n," to ").concat(l,":").concat(r," ").concat(i)}function L(){var e,t,s=Object(c.useState)({wlgw:[],slgw:[],fetching:!0}),a=Object(d.a)(s,2),n=a[0],l=a[1],r=Object(c.useState)(!1),i=Object(d.a)(r,2),j=i[0],m=i[1];return Object(c.useEffect)((function(){if(!j){var e=JSON.parse(sessionStorage.getItem("fleetStatus")),t=encodeURI(e.wlgw.thingName),s=encodeURI(e.slgw.thingName);fetch("/api/alerts/active?thingNames=".concat(t,"&thingNames=").concat(s)).then((function(e){200===e.status&&(m(!0),e.json().then((function(e){e.fetching=!1,e.wlgw&&e.wlgw.forEach((function(e){return W(e)})),e.slgw&&e.slgw.forEach((function(e){return W(e)})),l(e)})))}),(function(e){console.log(e)}))}}),[n,j]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Today's Alerts"}),n.fetching&&Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)("div",{className:"spinner-border m-5",role:"status",style:{width:"3rem",height:"3rem"}})}),!n.fetching&&0===n.wlgw.length&&0===n.slgw.length&&Object(o.jsx)("p",{className:"fw-normal",children:"There are no active alerts."}),(n.wlgw.length>0||n.slgw.length>0)&&Object(o.jsx)("p",{className:"fw-normal",children:"There are some alerts which need to be addressed."}),n.wlgw.length>0&&Object(o.jsx)("p",{className:"fw-bold",children:"For Overhead Water Tank"}),(null===(e=n.wlgw)||void 0===e?void 0:e.length)>0&&n.wlgw.map((function(e,t){return Object(o.jsx)("div",{className:"row",children:J(e)},t)})),n.slgw.length>0&&Object(o.jsx)("p",{className:"fw-bold",children:"For Sump Tank"}),(null===(t=n.slgw)||void 0===t?void 0:t.length)>0&&n.slgw.map((function(e,t){return Object(o.jsx)("div",{className:"row",children:J(e)},t)}))]})}function M(e){var t=function(e){return"Leakage"===e.type?["Water flowed continuously!",Object(o.jsxs)("span",{children:["Water was continuously flowing at the rate of ",Object(o.jsxs)("span",{className:"fw-bold",children:[e.data.mean," ltr"]}),"\xa0per minute between ",Object(o.jsx)("span",{className:"fw-bold",children:e.data.timeRange})," on \xa0",new Date(e.timestamp).toDateString()]})]:["Attention"]}(e),s=Object(d.a)(t,2),c=s[0],a=s[1];return Object(o.jsx)("div",{className:"col-8",children:Object(o.jsx)("div",{className:"card mb-3 top-m-5",children:Object(o.jsxs)("div",{className:"row g-0 h-100",children:[Object(o.jsx)("div",{className:"col-md-4 bg-secondary",children:Object(o.jsx)("div",{className:"img-fluid rounded-start d-flex align-items-center justify-content-center",children:Object(o.jsx)("i",{className:"bi bi-droplet-half",style:{fontSize:"07rem",color:"cornflowerblue"}})})}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{className:"card-title",children:c}),Object(o.jsx)("p",{className:"card-text",children:a})]})})]})})})}function C(e){var t=new Date(e.data.fromTimestamp),s=new Date(e.data.toTimestamp),c=t.getHours(),a=t.getMinutes(),n=c>12?" pm":" am",l=s.getHours(),r=s.getMinutes(),i=l>12?" pm":" am";e.data.timeRange="".concat(c,":").concat(a," ").concat(n," to ").concat(l,":").concat(r," ").concat(i)}function P(){var e,t,s=Object(c.useState)({wlgw:[],slgw:[],fetching:!0}),a=Object(d.a)(s,2),n=a[0],l=a[1],r=Object(c.useState)(!1),i=Object(d.a)(r,2),j=i[0],m=i[1];return Object(c.useEffect)((function(){if(!j){var e=JSON.parse(sessionStorage.getItem("fleetStatus")),t=encodeURI(e.wlgw.thingName),s=encodeURI(e.slgw.thingName);fetch("/api/alerts/history?thingNames=".concat(t,"&thingNames=").concat(s)).then((function(e){200===e.status&&(m(!0),e.json().then((function(e){e.fetching=!1,e.wlgw&&e.wlgw.forEach((function(e){return C(e)})),e.slgw&&e.slgw.forEach((function(e){return C(e)})),l(e)})))}))}}),[n,j]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Alerts History"}),n.fetching&&Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)("div",{className:"spinner-border m-5",role:"status",style:{width:"3rem",height:"3rem"}})}),!n.fetching&&0===n.wlgw.length&&0===n.slgw.length&&Object(o.jsx)("p",{className:"fw-normal",children:"There are no alerts."}),n.wlgw.length>0&&Object(o.jsx)("p",{className:"fw-bold",children:"For Overhead Water Tank"}),(null===(e=n.wlgw)||void 0===e?void 0:e.length)>0&&n.wlgw.map((function(e,t){return Object(o.jsx)("div",{className:"row",children:M(e)},t)})),n.slgw.length>0&&Object(o.jsx)("p",{className:"fw-bold",children:"For Sump Tank"}),(null===(t=n.slgw)||void 0===t?void 0:t.length)>0&&n.slgw.map((function(e,t){return Object(o.jsx)("div",{className:"row",children:M(e)},t)}))]})}function U(e){var t=Date.now()-e;return t>=3e5&&t<=6e5?"warning":t>6e5?"danger":"secondary"}function F(e){var t=Date.now()-e,s=t>=3e5&&t<=6e5,c=t>6e5;return s||c?Object(o.jsxs)("p",{className:"card-text",children:["The overhead water tank is ",Object(o.jsx)("span",{className:"fw-bold",children:"OFFLINE"}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),s&&!c&&"It has not communicated since last 10 minutes.",c&&"It has has been more than 10 minutes since it last communicated."]}):Object(o.jsxs)("p",{className:"card-text",children:["The overhead water tank is ",Object(o.jsx)("span",{className:"fw-bold",children:"ONLINE"})]})}function H(e){return new Date(e).toLocaleString()}function z(){var e=m(),t=Object(c.useState)(void 0),s=Object(d.a)(t,2),a=s[0],n=s[1],l=Object(r.h)();return Object(c.useEffect)((function(){if(!a){var e=sessionStorage.getItem("fleetStatus");e?n(JSON.parse(e)):fetch("/api/status").then((function(e){e.status>=200&&e.status<400?e.json().then((function(e){n(e),sessionStorage.setItem("fleetStatus",JSON.stringify(e))})):e.text().then((function(e){console.log(e)}))}))}}),[a,e,l]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Fleet Status"}),Object(o.jsx)("p",{className:"fw-normal",children:"This page shows whether all the components of your system are online."}),!a&&Object(o.jsx)("p",{className:"fw-normal",children:"Please wait while we fetch the details..."}),!a&&Object(o.jsx)("div",{className:"d-flex justify-content-center",children:Object(o.jsx)("div",{className:"spinner-border m-5",role:"status",style:{width:"3rem",height:"3rem"}})}),a&&Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-8",children:[Object(o.jsx)("p",{className:"d-flex justify-content-end",children:Object(o.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){sessionStorage.removeItem("fleetStatus"),n(null)},children:"Refresh"})}),Object(o.jsx)("div",{className:"card mb-3 top-m-5",children:Object(o.jsxs)("div",{className:"row g-0 h-100",children:[Object(o.jsx)("div",{className:"col-md-4 bg-"+U(a.wlgw.timestamp),children:Object(o.jsx)("div",{className:"img-fluid rounded-start d-flex align-items-center justify-content-center",children:Object(o.jsx)("i",{className:"bi bi-water",style:{fontSize:"07rem",color:"cornflowerblue"}})})}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{className:"card-title",children:"Overhead Tank"}),F(a.wlgw.timestamp),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsxs)("small",{className:"text-muted",children:["Received last update on ",H(a.wlgw.timestamp)]})})]})})]})})]})}),a&&a.slgw&&Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-8",children:Object(o.jsx)("div",{className:"card mb-3 top-m-5",children:Object(o.jsxs)("div",{className:"row g-0 h-100",children:[Object(o.jsx)("div",{className:"col-md-4 bg-"+U(a.slgw.timestamp),children:Object(o.jsx)("div",{className:"img-fluid rounded-start d-flex align-items-center justify-content-center",children:Object(o.jsx)("i",{className:"bi bi-moisture",style:{fontSize:"07rem",color:"cornflowerblue"}})})}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{className:"card-title",children:"Sump Tank"}),F(a.slgw.timestamp),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsxs)("small",{className:"text-muted",children:["Received last update on ",H(a.slgw.timestamp)]})})]})})]})})})})]})}l.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(h,{children:Object(o.jsx)(i.a,{children:Object(o.jsxs)(r.e,{children:[Object(o.jsx)(r.c,{path:"/login",element:Object(o.jsx)(f,{})}),Object(o.jsxs)(r.c,{path:"/",element:Object(o.jsx)(g,{children:Object(o.jsx)(O,{})}),children:[Object(o.jsx)(r.c,{path:"/dashboard/summary",element:Object(o.jsx)(g,{children:Object(o.jsx)(w,{})})}),Object(o.jsx)(r.c,{path:"/dashboard/usage",element:Object(o.jsx)(g,{children:Object(o.jsx)(D,{})})}),Object(o.jsx)(r.c,{path:"/dashboard/monitor",element:Object(o.jsx)(g,{children:Object(o.jsx)(z,{})})}),Object(o.jsx)(r.c,{path:"/schedules/current",element:Object(o.jsx)(g,{children:Object(o.jsx)(E,{})})}),Object(o.jsx)(r.c,{path:"/status/fleet",element:Object(o.jsx)(g,{children:Object(o.jsx)(R,{})})}),Object(o.jsx)(r.c,{path:"/alerts/active",element:Object(o.jsx)(g,{children:Object(o.jsx)(L,{})})}),Object(o.jsx)(r.c,{path:"/alerts/history",element:Object(o.jsx)(g,{children:Object(o.jsx)(P,{})})})]})]})})})}),document.getElementById("root"))}},[[303,1,2]]]);
//# sourceMappingURL=main.69e5ef43.chunk.js.map